{"version":3,"file":"expand.js","names":["useProxiedModel","inject","provide","toRef","isObject","propsFactory","makeDataTableExpandProps","expandOnClick","Boolean","showExpand","expanded","type","Array","default","VDataTableExpandedKey","Symbol","for","provideExpanded","props","v","Set","values","getItemKey","item","value","key","expand","newExpanded","delete","add","isExpanded","has","toggleExpand","data","useExpanded","Error"],"sources":["../../../../src/components/VDataTable/composables/expand.ts"],"sourcesContent":["// Composables\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { inject, provide, toRef } from 'vue'\nimport { isObject, propsFactory } from '@/util'\n\n// Types\nimport type { InjectionKey, PropType, Ref } from 'vue'\nimport type { DataTableItem } from '../types'\n\nexport const makeDataTableExpandProps = propsFactory({\n  expandOnClick: Boolean,\n  showExpand: Boolean,\n  expanded: {\n    type: Array as PropType<readonly string[]>,\n    default: () => ([]),\n  },\n}, 'DataTable-expand')\n\nexport const VDataTableExpandedKey: InjectionKey<{\n  expand: (item: DataTableItem, value: boolean) => void\n  expanded: Ref<Set<string>>\n  expandOnClick: Ref<boolean | undefined>\n  isExpanded: (item: DataTableItem) => boolean\n  toggleExpand: (item: DataTableItem) => void\n}> = Symbol.for('vuetify:datatable:expanded')\n\ntype ExpandProps = {\n  expandOnClick: boolean\n  expanded: readonly string[]\n  'onUpdate:expanded': ((value: any[]) => void) | undefined\n}\n\nexport function provideExpanded (props: ExpandProps) {\n  const expandOnClick = toRef(() => props.expandOnClick)\n  const expanded = useProxiedModel(props, 'expanded', props.expanded, v => {\n    return new Set(v)\n  }, v => {\n    return [...v.values()]\n  })\n\n  function getItemKey (item: DataTableItem) {\n    return isObject(item.value) ? item.key : item.value\n  }\n\n  function expand (item: DataTableItem, value: boolean) {\n    const newExpanded = new Set(expanded.value)\n\n    if (!value) {\n      newExpanded.delete(getItemKey(item))\n    } else {\n      newExpanded.add(getItemKey(item))\n    }\n\n    expanded.value = newExpanded\n  }\n\n  function isExpanded (item: DataTableItem) {\n    return expanded.value.has(getItemKey(item))\n  }\n\n  function toggleExpand (item: DataTableItem) {\n    expand(item, !isExpanded(item))\n  }\n\n  const data = { expand, expanded, expandOnClick, isExpanded, toggleExpand }\n\n  provide(VDataTableExpandedKey, data)\n\n  return data\n}\n\nexport function useExpanded () {\n  const data = inject(VDataTableExpandedKey)\n\n  if (!data) throw new Error('foo')\n\n  return data\n}\n"],"mappings":"AAAA;AAAA,SACSA,eAAe,gDAExB;AACA,SAASC,MAAM,EAAEC,OAAO,EAAEC,KAAK,QAAQ,KAAK;AAAA,SACnCC,QAAQ,EAAEC,YAAY,kCAE/B;AAIA,OAAO,MAAMC,wBAAwB,GAAGD,YAAY,CAAC;EACnDE,aAAa,EAAEC,OAAO;EACtBC,UAAU,EAAED,OAAO;EACnBE,QAAQ,EAAE;IACRC,IAAI,EAAEC,KAAoC;IAC1CC,OAAO,EAAEA,CAAA,KAAO;EAClB;AACF,CAAC,EAAE,kBAAkB,CAAC;AAEtB,OAAO,MAAMC,qBAMX,GAAGC,MAAM,CAACC,GAAG,CAAC,4BAA4B,CAAC;AAQ7C,OAAO,SAASC,eAAeA,CAAEC,KAAkB,EAAE;EACnD,MAAMX,aAAa,GAAGJ,KAAK,CAAC,MAAMe,KAAK,CAACX,aAAa,CAAC;EACtD,MAAMG,QAAQ,GAAGV,eAAe,CAACkB,KAAK,EAAE,UAAU,EAAEA,KAAK,CAACR,QAAQ,EAAES,CAAC,IAAI;IACvE,OAAO,IAAIC,GAAG,CAACD,CAAC,CAAC;EACnB,CAAC,EAAEA,CAAC,IAAI;IACN,OAAO,CAAC,GAAGA,CAAC,CAACE,MAAM,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC;EAEF,SAASC,UAAUA,CAAEC,IAAmB,EAAE;IACxC,OAAOnB,QAAQ,CAACmB,IAAI,CAACC,KAAK,CAAC,GAAGD,IAAI,CAACE,GAAG,GAAGF,IAAI,CAACC,KAAK;EACrD;EAEA,SAASE,MAAMA,CAAEH,IAAmB,EAAEC,KAAc,EAAE;IACpD,MAAMG,WAAW,GAAG,IAAIP,GAAG,CAACV,QAAQ,CAACc,KAAK,CAAC;IAE3C,IAAI,CAACA,KAAK,EAAE;MACVG,WAAW,CAACC,MAAM,CAACN,UAAU,CAACC,IAAI,CAAC,CAAC;IACtC,CAAC,MAAM;MACLI,WAAW,CAACE,GAAG,CAACP,UAAU,CAACC,IAAI,CAAC,CAAC;IACnC;IAEAb,QAAQ,CAACc,KAAK,GAAGG,WAAW;EAC9B;EAEA,SAASG,UAAUA,CAAEP,IAAmB,EAAE;IACxC,OAAOb,QAAQ,CAACc,KAAK,CAACO,GAAG,CAACT,UAAU,CAACC,IAAI,CAAC,CAAC;EAC7C;EAEA,SAASS,YAAYA,CAAET,IAAmB,EAAE;IAC1CG,MAAM,CAACH,IAAI,EAAE,CAACO,UAAU,CAACP,IAAI,CAAC,CAAC;EACjC;EAEA,MAAMU,IAAI,GAAG;IAAEP,MAAM;IAAEhB,QAAQ;IAAEH,aAAa;IAAEuB,UAAU;IAAEE;EAAa,CAAC;EAE1E9B,OAAO,CAACY,qBAAqB,EAAEmB,IAAI,CAAC;EAEpC,OAAOA,IAAI;AACb;AAEA,OAAO,SAASC,WAAWA,CAAA,EAAI;EAC7B,MAAMD,IAAI,GAAGhC,MAAM,CAACa,qBAAqB,CAAC;EAE1C,IAAI,CAACmB,IAAI,EAAE,MAAM,IAAIE,KAAK,CAAC,KAAK,CAAC;EAEjC,OAAOF,IAAI;AACb","ignoreList":[]}